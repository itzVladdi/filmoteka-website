{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAYMC,GAAM,EAAAF,EAAAG,eAZW,CACrBC,OAAQ,0CACRC,WAAY,qCACZC,YAAa,yDACbC,UAAW,qBACXC,cAAe,iCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAMXC,IADY,EAAAC,EAAAC,cAAaZ,IACpB,EAAAa,EAAAC,gBAMLC,EAAWC,SAASC,cAAc,YAClCC,EAAWF,SAASC,cAAc,YAClCE,EAAWH,SAASC,cAAc,kBACxCG,QAAQC,IAAIF,GAwDZA,EAASG,iBAAiB,SAnD1B,WACI,MAAMC,GAAQ,EAAAV,EAAAW,KAAId,IAClB,EAAAG,EAAAY,MAAI,EAAAZ,EAAAa,OAAMH,EAAO,cAAgBR,EAASY,QAAQC,MAAMC,IACpD,GAAIA,EAASC,SAAU,CACnB,IAAIC,EAuBhB,SAAiBA,GAEb,OADaC,EAAAC,GAASC,IAAIC,QAAQJ,EAAQb,EAASS,OACrCS,SAASJ,EAAAC,GAASI,IAAIC,K,CAzBfC,CAAQV,EAASW,MAAMC,UACpCrB,QAAQC,IAAIQ,EAASW,MAAMC,UAC3BrB,QAAQC,IAAIU,GACZX,QAAQC,IAAIH,EAASS,OACjBI,GAAUb,EAASS,OA0BpBe,EAzBOb,EAASW,MA0BRxB,SAASC,cAAc,2BAA2B0B,SAQjEC,aAAaC,QAAQ,eAAgB,OACrCD,aAAaC,QAAQ,OAAQC,KAAKC,UAAUL,IAC5CM,OAAOC,SAAW,eAPlBC,eAAeL,QAAQ,OAAQC,KAAKC,UAAUL,IAC9CM,OAAOC,SAAW,eA1BVE,MAAM,kC,MAKVA,MAAM,wBAgBlB,IAAeT,CAhB0B,G","sources":["src/js/login.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getDatabase, ref, set, child, get, enableLogging } from \"firebase/database\";\nimport CryptoJS from \"crypto-js\";\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC_AoWR6sIw9yYqEcm5_Le0FK59RgGenNY\",\n  authDomain: \"filmoteka-js-c90cd.firebaseapp.com\",\n  databaseURL: \"https://filmoteka-js-c90cd-default-rtdb.firebaseio.com\",\n  projectId: \"filmoteka-js-c90cd\",\n  storageBucket: \"filmoteka-js-c90cd.appspot.com\",\n  messagingSenderId: \"542180533478\",\n  appId: \"1:542180533478:web:cc24636cc3211b9b060727\",\n  measurementId: \"G-04MJBK1QWZ\"\n};\n\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\nconst db = getDatabase();\n\n\n// -----------------------------THE REFERENCES----------------------------- // \n\n// LOG IN\nconst username = document.querySelector('#userInp');\nconst password = document.querySelector('#passInp');\nconst subLogIn = document.querySelector('#sub_login_btn');\nconsole.log(subLogIn)\n\n\n// -------------------------AUTHENTICATION PROCESS------------------------- // \n\nfunction authUser() {\n    const dbRef = ref(db);\n    get(child(dbRef, 'UsersLists/' + username.value)).then((snapshot) => {\n        if (snapshot.exists()) {\n            let dbpass = decPass(snapshot.val().password);\n            console.log(snapshot.val().password)\n            console.log(dbpass)\n            console.log(password.value)\n            if (dbpass == password.value) {\n                login(snapshot.val());\n            }\n            \n            else {\n                alert(\"Username or password is invalid\");       \n            }\n        }\n\n        else {\n            alert(\"User does not exist!\");\n        }\n\n    });\n}\n\n\n// -------------------------DECRYPTION PROCESS------------------------- // \n\nfunction decPass(dbpass) {\n    let pass12 = CryptoJS.AES.decrypt(dbpass, password.value);\n    return pass12.toString(CryptoJS.enc.Utf8);\n}\n\n// --------------------------------LOGIN------------------------------- // \n\nfunction login(user) {\n    let keepLoggedIn = document.querySelector(\"#flexSwitchCheckDefault\").checked;\n\n    if (!keepLoggedIn) {\n        sessionStorage.setItem('user', JSON.stringify(user));\n        window.location = \"index.html\";\n    }\n\n    else {\n        localStorage.setItem('keepLoggedIn', 'yes');\n        localStorage.setItem('user', JSON.stringify(user));\n        window.location = \"index.html\";\n    }\n}\n\n// ----------------------------ASSIGN THE EVENTS----------------------------- // \n\nsubLogIn.addEventListener('click', authUser);"],"names":["$25RCP","parcelRequire","$27435ee7e70aa165$var$app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","$27435ee7e70aa165$var$db","$6Y62z","getAnalytics","$fQ3Fn","getDatabase","$27435ee7e70aa165$var$username","document","querySelector","$27435ee7e70aa165$var$password","$27435ee7e70aa165$var$subLogIn","console","log","addEventListener","dbRef","ref","get","child","value","then","snapshot","exists","dbpass","$parcel$interopDefault","$kWcCv","AES","decrypt","toString","enc","Utf8","$27435ee7e70aa165$var$decPass","val","password","user","checked","localStorage","setItem","JSON","stringify","window","location","sessionStorage","alert"],"version":3,"file":"login.632b6d83.js.map"}