{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAgBMC,GAAM,EAAAF,EAAAG,eAXW,CACrBC,OAAQ,0CACRC,WAAY,qCACZC,YAAa,yDACbC,UAAW,qBACXC,cAAe,iCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAKXC,IADY,EAAAC,EAAAC,cAAaZ,IACd,EAAAa,EAAAC,gBAKXC,EAAOC,SAASC,cAAc,YAC9BC,EAAQF,SAASC,cAAc,aAC/BE,EAAWH,SAASC,cAAc,YAClCG,EAAWJ,SAASC,cAAc,YAKxC,SAASI,EAAgBC,GACvB,OAAe,OAARA,GAAsC,OAAtBA,EAAIC,MAAK,O,CALhBP,SAASC,cAAc,mBAgF/BO,iBAAiB,SAnC3B,WACE,GAhCEH,EAAgBN,EAAKU,QACrBJ,EAAgBH,EAAMO,QACtBJ,EAAgBF,EAASM,QACzBJ,EAAgBD,EAASK,QAEzBC,MAAM,kCACC,GAXI,gBAcEC,KAAKZ,EAAKU,OAbX,4CAkBEE,KAAKT,EAAMO,OAjBd,oBAsBEE,KAAKR,EAASM,SAC3BC,MACE,8GAEK,IARPA,MAAM,wBACC,IANPA,MAAM,2CACC,GAqBT,CAGA,IAAME,GAAc,EAAAf,EAAAgB,KAAInB,IAExB,EAAAG,EAAAiB,MAAI,EAAAjB,EAAAkB,OAAMH,EAAa,cAA6BI,OAAfb,EAASM,SAAUQ,MAAK,SAAAC,GAsB/D,IACMC,EAtBED,EAASE,SACXV,MAAM,4BAEN,EAAAb,EAAAwB,MAAI,EAAAxB,EAAAgB,KAAInB,EAAU,cAAgBS,EAASM,OAAQ,CACjDa,SAAUvB,EAAKU,MACfc,MAAOrB,EAAMO,MACbe,SAAUrB,EAASM,MACnBgB,UAeFN,EAASO,EAAAC,GAASC,IAAIC,QAAQzB,EAASK,MAAOL,EAASK,OACpDU,EAAOW,cAdPb,MAAK,WACJP,MAAM,2BACNqB,OAAOC,SAAW,Y,IAEnBC,OAAM,WACLvB,MAAM,QAAUwB,M,MAnBtB,C","sources":["src/js/signup.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getAnalytics } from 'firebase/analytics';\nimport { getDatabase, ref, set, child, get } from 'firebase/database';\nimport CryptoJS, { enc } from 'crypto-js';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyC_AoWR6sIw9yYqEcm5_Le0FK59RgGenNY',\n  authDomain: 'filmoteka-js-c90cd.firebaseapp.com',\n  databaseURL: 'https://filmoteka-js-c90cd-default-rtdb.firebaseio.com',\n  projectId: 'filmoteka-js-c90cd',\n  storageBucket: 'filmoteka-js-c90cd.appspot.com',\n  messagingSenderId: '542180533478',\n  appId: '1:542180533478:web:cc24636cc3211b9b060727',\n  measurementId: 'G-04MJBK1QWZ',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\nconst database = getDatabase();\n\n// -----------------------------THE REFERENCES----------------------------- //\n\n// SIGN UP\nconst name = document.querySelector('#nameInp');\nconst email = document.querySelector('#emailInp');\nconst username = document.querySelector('#userInp');\nconst password = document.querySelector('#passInp');\nconst subSignUp = document.querySelector('#sub_signup_btn');\n\n// -------------------------------VALIDATION------------------------------- //\n\nfunction isEmptyOrSpaces(str) {\n  return str === null || str.match(/^ *$/) !== null;\n}\n\nfunction validation() {\n  let nameregex = /^[a-zA-Z\\s]+$/;\n  let emailregex = /^[a-zA-Z0-9]+@(gmail|yahoo|outlook)\\.com$/;\n  let userregex = /^[a-zA-Z0-9]{5,}$/;\n\n  if (\n    isEmptyOrSpaces(name.value) ||\n    isEmptyOrSpaces(email.value) ||\n    isEmptyOrSpaces(username.value) ||\n    isEmptyOrSpaces(password.value)\n  ) {\n    alert(\"You can't left any field empty\");\n    return false;\n  }\n\n  if (!nameregex.test(name.value)) {\n    alert('The name should only contain alphabets!');\n    return false;\n  }\n\n  if (!emailregex.test(email.value)) {\n    alert('Enter a valid email!');\n    return false;\n  }\n\n  if (!userregex.test(username.value)) {\n    alert(\n      '-username can only be alphanumeric\\n-username must be aleast 5 characters\\n-username cannot contain spaces'\n    );\n    return false;\n  }\n\n  return true;\n}\n\n// ------------------------REGISTER USER TO FIREBASE------------------------- //\n\nfunction registerUser() {\n  if (!validation()) {\n    return;\n  }\n  const databaseRef = ref(database);\n\n  get(child(databaseRef, `UsersLists/${username.value}`)).then(snapshot => {\n    if (snapshot.exists()) {\n      alert('Account already exists!');\n    } else {\n      set(ref(database, 'UsersLists/' + username.value), {\n        fullname: name.value,\n        email: email.value,\n        username: username.value,\n        password: encPass(),\n      })\n        .then(() => {\n          alert('User added successfully');\n          window.location = 'login.html';\n        })\n        .catch(() => {\n          alert('error' + error);\n        });\n    }\n  });\n}\n\n// -------------------------------ENCRIPTION-------------------------------- //\nfunction encPass() {\n  let pass12 = CryptoJS.AES.encrypt(password.value, password.value);\n  return pass12.toString();\n}\n\n// ----------------------------ASSIGN THE EVENTS----------------------------- //\n\nsubSignUp.addEventListener('click', registerUser);\n"],"names":["$6Urw1","parcelRequire","$6d5a49cac61a7cac$var$app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","$6d5a49cac61a7cac$var$database","$bK1n4","getAnalytics","$6Nu6u","getDatabase","$6d5a49cac61a7cac$var$name","document","querySelector","$6d5a49cac61a7cac$var$email","$6d5a49cac61a7cac$var$username","$6d5a49cac61a7cac$var$password","$6d5a49cac61a7cac$var$isEmptyOrSpaces","str","match","addEventListener","value","alert","test","databaseRef","ref","get","child","concat","then","snapshot","pass12","exists","set","fullname","email","username","password","$parcel$interopDefault","$l0SaF","AES","encrypt","toString","window","location","catch","error"],"version":3,"file":"register.bf478706.js.map"}